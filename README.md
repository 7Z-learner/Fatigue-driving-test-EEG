# Fatigue-driving-test-EEG
使用BCI设备采集EEG信号，预处理去除噪声和伪迹，采取EMD、ICA提取特征，特征值选定为模糊熵和样本熵，分类器选择3分类器集成框架或ABC-PSO算法，疲劳分类结果无线传输至Android端APP，用户可自行选择抗疲劳措施，实现行车安全。
### 系统搭建学习记录
#### 1.数据预处理
基本流程：导入数据->检查补充数据（channel locations）->基本处理（tools中重参考、采样率、滤波等）->去除眼电伪迹（run ICA）->分段（extract epochs）->

打开MATLAB，导入EEGLAB，载入数据包，窗口显示EEG数据的详细信息。信息主要含义如下：
- channel per frame：导入的数据通道个数
- frames per epoch：一段数据的总长度，采样点个数
- epochs：指当前数据的段数，原始数据还没有进行分段，因此显示只有一段
- events：检测到当前数据一共有202个events
- sampling rate（HZ）：数据的采样率为1000HZ
- epoch start和epoch end：这个的分段是从0秒开始，到439.879秒结束。还没有进行分段所以看这个数值没有意义
- reference: 指数据的参考点，重参考后会显示重参考的电极点，或者average，目前还没有进行重参考所以是unknown
- channel locations：是否有对通道进行定位，目前显示没有，定位后会显示为yes
- ICA weights：是否对数据进行了ICA独立主成分分析，分析后会显示yes
- dataset size：数据的大小

点击“channel locations”，共33个电极，其中HEO和VEO没有具体数据，可以根据给定的样本数据文本文件，自行添加数据，输入极坐标，点击转换键，可以转换出直角坐标系和球坐标系。

点击“tools”，可对数据做许多处理，如改变采样率、重参考、滤波等，重参考可以选择单电极作为参考，也可删除不必要的电极，一般来说，重参考在前，滤波在后。

“run ICA”可检测EEG数据中的眼电部分，从而针对性删除。数据时间较长，可对波形先分段，再“run ICA”。先滤波，再run ICA。进程结束后，窗口首页ICA Weights显示YES，导入执行完run ICA的文件。run ICA结束后，将处理后的数据保存为.set形式，以便剔除失误，可重新加载原始数据。选择“reject  component by maps”打开每个ICA成分的缩略图，reject包含伪迹的成分，倘若要完全移除伪迹成分，点击“remove component”。而后，“dataset”中会有remove后的.set文件。但还未保存在文档中。

点击“dataset”，有历史修改处理后数据的存档，选择其中一个，点击“plot”，可显示数据波形图，鼠标选择波形段落，可自行删减。

点击“extract epochs”，可根据刺激点锁定时间，对数据进行分类，具体操作参考网址> https://blog.csdn.net/zyb228/article/details/102671540
翻译自EEGLAB官网指导。

点击“reject data epochs”，可删除分段后不需要的段。红点标注处，修改value值，点击plot，标黄不满足要求的图像，0处改为不满足的区域个数。在显示图像窗口右下角的update可以更新不符合段落的个数，然后点击右下角的reject即可删除筛选出来的不符合的段落。
![](https://images.gitee.com/uploads/images/2021/0317/200044_07a0bc8c_8794964.png "QQ图片20210317200028.png")


#### 关于ERP

 **诱发电位** ：给人体感官、感觉神经或运动皮质、运动神经以刺激，兴奋沿相应的神经通路向中枢或外周传导，在传导过程中，产生的不断组合传递的电位变化，即为诱发电位。

对诱发电位加以分析，可以反映出不同部位的神经功能状态。由于诱发电位非常微小，必须借助电脑对重复刺激的信号进行叠加处理，将其放大，并从淹没于肌电、脑电的背景中提取出来，才能加以描述。主要是对波形、主波的潜伏期、波峰间期和事件相关诱发电位，以及视网膜图和耳蜗电图等。

诱发电位具有高度敏感性，对感觉障碍可进行客观评估，对病变能进行定量判断。

 **事件相关电位（ERP）** :Sutton提出了事件相关电位的概念，通过平均叠加技术从头颅表面记录大脑诱发电位来反映认知过程中大脑的神经电生理改变，因为事件相关点位与认知过程有密切关系，被认为是窥视心理活动的窗口。

事件相关电位是一种特殊的脑诱发电位，通过有意地赋予刺激仪特殊的心理意义，利用多个或多样的刺激所引起的脑电位。它反映了认知过程中大脑的神经点生理的变化，也被称为认知电位，经典的ERP主要成分包括P1、N1、P2、N2、P3。其中，P3是ERP中最受关注和研究的一种内源性成分。

关于ERP的更详细内容参考网站> https://wenku.baidu.com/view/f11618ce5901020206409cc4.html> https://wenku.baidu.com/view/c5cf637927284b73f24250ef.html
包括特征、分类、影响因素、测量方法等。

EEGLAB中，分段后即可观察ERP，不会自动做平均叠加，可以通过“plot”->“Sum/Compare ERPS”手动叠加。打开页面中选择“avg”为选择的dataset的平均，如果想要观察已选择的所有dataset，选择“all ERPs”。

 **关于一些符号说明** 

![输入图片说明](https://images.gitee.com/uploads/images/2021/0317/213042_d3d6fbd1_8794964.png "QQ图片20210317213003.png")

